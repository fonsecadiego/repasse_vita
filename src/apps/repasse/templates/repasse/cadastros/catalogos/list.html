{% extends "repasse/base.html" %}
{% block content %}
<div class="card">
    <h1>{{ config.title }}</h1>
    <form method="get" style="display:flex;gap:8px;align-items:end;">
        <div class="field" style="max-width:320px;"><label>Busca</label><input name="q" value="{{ search }}" placeholder="Pesquisar por nome"></div>
        <button class="btn" type="submit">Buscar</button>
    </form>
</div>

<div class="card">
    <h3>Novo item</h3>
    <form method="post" style="display:flex;gap:8px;align-items:end;">
        {% csrf_token %}
        <div class="field" style="min-width:280px;"><label>Nome</label>{{ form.nome }}{{ form.nome.errors }}</div>
        <div class="field"><label>{{ form.ativo }} Ativo</label></div>
        <button class="btn" type="submit">Criar</button>
    </form>
</div>

<div class="card">
    <table>
        <thead><tr><th>Nome</th><th>Status</th><th>Ações</th></tr></thead>
        <tbody>
            {% for item in items %}
                <tr>
                    <td>{{ item.nome }}</td>
                    <td>{% if item.ativo %}Ativo{% else %}Inativo{% endif %}</td>
                    <td style="display:flex;gap:6px;">
                        <a class="btn btn-secondary" href="{% url 'repasse-cadastros-catalogos-editar' config.key item.id %}">Editar</a>
                        <form method="post" action="{% url 'repasse-cadastros-catalogos-toggle' config.key item.id %}">
                            {% csrf_token %}
                            <button class="btn" type="submit">{% if item.ativo %}Desativar{% else %}Ativar{% endif %}</button>
                        </form>
                    </td>
                </tr>
            {% empty %}
                <tr><td colspan="3">Sem itens.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
